### Задание:

a) Бекап должен архивировать все данные в формат tar.gz и хранить в директории /var/bac/.

- 1. Архивация должна производиться благодаря юниту типа service с названием backup.
- 2. Сервис должен включатся автоматический при загрузке.

### Вариант реализации:

### SRV1-HQ:

- Создаём директорию для хранения бэкапа общей папки:

```
mkdir /var/bac/
```

- Создаём юнит типа **service** с названием **backup**:

```
vim /etc/systemd/system/backup.service
```

- - Помещаем в данный файл - следующее содержимое, где:
        - **Description** - описание юнита;
        - **Type** - тип юнита (очень важный параметр, **oneshot** — если подразумевается разовый запуск утилиты или скрипта, то подойдет этот тип)
        - **ExecStart** - команда, которая запускает службу. Именно в этом параметре нужно указать главный исполняемый файл (утилиту или скрипт), ради которого мы создаём службу
        - **WantedBy** - если мы включим автозагрузку этой службы (с помощью команды **systemctl enable <имя службы>**), то она должна запуститься при загрузке мультипользовательского режима (**multi-user.target**)

![](https://sysahelper.ru/pluginfile.php/784/mod_page/content/2/%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5.png)

- Выполним команду которая запустит перезагрузку и перечитывание всех конфигурационных файлов для юнитов:

```
systemctl daemon-reload
```

- Включаем и добавляем в автозагрузку созданные юнит **backup.service**:

```
systemctl enable --now backup.service
```

- После запуска и добавления в автозигрузку службы **backup** должен создаться архив, а служба перейти в состояние **inactive,** но добавлена в автозагрузку, чтобы при перезагрузки автоматически создавалась резервная копия:

![](https://sysahelper.ru/pluginfile.php/839/mod_page/content/3/image.png)